<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="dom.css" />
    <style>
      /* Add your styles here */
      .experience-entry {
        border: 1px solid #ddd;
        padding: 10px;
        margin: 10px;
        position: relative;
      }

      .experience-entry button {
        position: absolute;
        top: 5px;
        right: 5px;
        cursor: pointer;
      }

      .filter-input {
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header">
        <a href="signup.html">Login!</a>
      </div>
    </header>
    <section class="portfolio">
      <div class="about">
        <h1>About</h1>
        <p>
          My name is Fazila Abbasi. I am from Rahim Yar Khan. I am a Wordpress
          developer. I have completed my internship at CodeNinja. I also have a
          3 month experience of Data Annotation. I cleared my Matric and FSC
          from Daanish School Rahim Yar Khan. I cleared my BSCS (2018-2022) from
          Govt Khawaja Fareed P/G college Rahim Yar Khan.
        </p>
      </div>
      <div class="experiences">
        <nav>
          <a href="index.html">Portfolio!</a>
        </nav>
        <div class="add-experience">Add Experience</div>

        <div class="experience-form" style="display: none">
          <form class="add-experience-form">
            <label for="companyName">Company Name:</label>
            <input type="text" class="company-name" required />
            <label for="startDate">Start Date:</label>
            <input type="date" class="start-date" required />
            <label for="endDate">End Date:</label>
            <input type="date" class="end-date" />
            <label for="description">Description:</label>
            <textarea class="description" rows="4"></textarea>

            <div class="flex-container">
              <div>Click to Save</div>
              <button type="submit">Save</button>
            </div>
          </form>
        </div>
        <div class="filter-input">
          <label for="filter">Search by Company Name:</label>
          <input type="text" id="filter" oninput="filterExperiences()" />
        </div>

        <div class="experiences-list">
          <!-- Experience entries will be dynamically added here -->
        </div>
      </div>

      <div class="sidebar">
        <div>
          <img src="New Project (40).webp" alt="Avatar" class="avatar" />
        </div>
        <div class="skill">
          <h1>Fazila Abbasi</h1>
          <h2>Skill's</h2>
          <ul>
            <li>HTML</li>
            <li>CSS</li>
            <li>MS Word</li>
            <li>MS Excel</li>
            <li>Power Point</li>
            <li>Java Script</li>
            <li>Team Working</li>
            <li>Documentation</li>
            <li>Event Planning</li>
            <li>Project Reports</li>
            <li>Communication Skills</li>
            <li>Presentation Skills</li>
            <li>Project Management</li>
          </ul>
        </div>
      </div>
    </section>
    <footer>
      <div class="footer">
        <a href="https://www.linkedin.com/in/fazila-abbasi-a07b18264/"
          >Link to My LinkedIn Profile!</a
        >
      </div>
    </footer>
    <script>
      const storedExperiences =
        JSON.parse(localStorage.getItem("experiences")) || [];

      for (const experience of storedExperiences) {
        displayExperience(experience);
      }

      document
        .querySelector(".add-experience")
        .addEventListener("click", function () {
          document.querySelector(".experience-form").style.display = "flex";
        });

      document
        .querySelector(".add-experience-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const companyName = document.querySelector(".company-name").value;
          const startDate = document.querySelector(".start-date").value;
          const endDate = document.querySelector(".end-date").value;
          const description = document.querySelector(".description").value;

          const newExperience = {
            companyName: companyName,
            startDate: startDate,
            endDate: endDate,
            description: description,
          };

          storedExperiences.push(newExperience);
          localStorage.setItem(
            "experiences",
            JSON.stringify(storedExperiences)
          );

          displayExperience(newExperience);

          document.querySelector(".add-experience-form").reset();
          document.querySelector(".experience-form").style.display = "none";
        });

      function displayExperience(experience) {
        const experienceEntry = document.createElement("div");
        experienceEntry.classList.add("experience-entry");
        experienceEntry.innerHTML = `
            <strong>${experience.companyName}</strong>
            <div>Start Date: ${experience.startDate}</div>
            <div>End Date: ${experience.endDate}</div>
            <div>Description: ${experience.description}</div>
            <button onclick="editExperience(${storedExperiences.indexOf(
              experience
            )})">Edit</button>
            <button onclick="deleteExperience(${storedExperiences.indexOf(
              experience
            )})">Delete</button>
        `;

        document
          .querySelector(".experiences-list")
          .appendChild(experienceEntry);
      }

      function deleteExperience(index) {
        storedExperiences.splice(index, 1);
        localStorage.setItem("experiences", JSON.stringify(storedExperiences));
        updateDisplay();
      }

      function editExperience(index) {
        const experience = storedExperiences[index];
        document.querySelector(".experience-form").style.display = "flex";

        document.querySelector(".company-name").value = experience.companyName;
        document.querySelector(".start-date").value = experience.startDate;
        document.querySelector(".end-date").value = experience.endDate;
        document.querySelector(".description").value = experience.description;

        // Add an event listener to the save button in the edit form
        document
          .querySelector(".add-experience-form button[type='submit']")
          .addEventListener("click", function () {
            // Update the existing experience object with new values
            experience.companyName =
              document.querySelector(".company-name").value;
            experience.startDate = document.querySelector(".start-date").value;
            experience.endDate = document.querySelector(".end-date").value;
            experience.description =
              document.querySelector(".description").value;

            // Save the updated experiences to localStorage
            localStorage.setItem(
              "experiences",
              JSON.stringify(storedExperiences)
            );

            // Update the display with the edited experience
            updateDisplay();

            // Reset and hide the experience form
            document.querySelector(".add-experience-form").reset();
            document.querySelector(".experience-form").style.display = "none";

            // Remove the event listener to prevent multiple bindings
            this.removeEventListener("click", arguments.callee);
          });

        storedExperiences.splice(index, 1);
        localStorage.setItem("experiences", JSON.stringify(storedExperiences));
      }

      function updateDisplay() {
        const experiencesList = document.querySelector(".experiences-list");
        experiencesList.innerHTML = "";

        for (const experience of storedExperiences) {
          displayExperience(experience);
        }
      }

      function filterExperiences() {
        const filterValue = document
          .getElementById("filter")
          .value.toLowerCase();
        const experiencesList = document.querySelector(".experiences-list");
        const experienceEntries =
          experiencesList.querySelectorAll(".experience-entry");

        experienceEntries.forEach((entry) => {
          const companyName = entry
            .querySelector("strong")
            .textContent.toLowerCase();
          const displayStyle = companyName.includes(filterValue)
            ? "block"
            : "none";
          entry.style.display = displayStyle;
        });
      }
    </script>
  </body>
</html>
